---
title: '성능 최적화: 레이아웃 및 디자인'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- layout [WPF], optimizing performance
- design considerations [WPF]
- layout pass [WPF]
ms.assetid: 005f4cda-a849-448b-916b-38d14d9a96fe
ms.openlocfilehash: c5dd567fa9f5db69c52072a1cc67b5c574f8e1f5
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/23/2019
ms.locfileid: "54623874"
---
# <a name="optimizing-performance-layout-and-design"></a><span data-ttu-id="b66aa-102">성능 최적화: 레이아웃 및 디자인</span><span class="sxs-lookup"><span data-stu-id="b66aa-102">Optimizing Performance: Layout and Design</span></span>
<span data-ttu-id="b66aa-103">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 응용 프로그램의 디자인 작업은 레이아웃 계산과 개체 참조의 유효성 검사 과정에서 불필요한 오버헤드를 초래하여 성능에 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-103">The design of your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application can impact its performance by creating unnecessary overhead in calculating layout and validating object references.</span></span> <span data-ttu-id="b66aa-104">또한 개체 생성 작업은 특히 런타임에 애플리케이션의 성능 특성에 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-104">The construction of objects, particularly at run time, can affect the performance characteristics of your application.</span></span>  
  
 <span data-ttu-id="b66aa-105">이 항목에서는 이러한 영역에서 성능과 관련된 권장 사항을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-105">This topic provides performance recommendations in these areas.</span></span>  
  
## <a name="layout"></a><span data-ttu-id="b66aa-106">레이아웃</span><span class="sxs-lookup"><span data-stu-id="b66aa-106">Layout</span></span>  
 <span data-ttu-id="b66aa-107">측정 및 멤버를 정렬 프로세스를 설명 하는 "레이아웃 단계" 라는 용어는 <xref:System.Windows.Controls.Panel>-자식 및 다음 화면에 그리는 개체의 컬렉션을 파생 합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-107">The term "layout pass" describes the process of measuring and arranging the members of a <xref:System.Windows.Controls.Panel>-derived object's collection of children, and then drawing them onscreen.</span></span> <span data-ttu-id="b66aa-108">레이아웃 단계는 많은 계산이 요구되는 프로세스이며 컬렉션의 자식 수가 많을수록 더 많은 계산이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-108">The layout pass is a mathematically-intensive process—the larger the number of children in the collection, the greater the number of calculations required.</span></span> <span data-ttu-id="b66aa-109">예를 들어 될 때마다 자식 <xref:System.Windows.UIElement> 해당 위치를 변경 하는 컬렉션의 개체, 레이아웃 시스템에 의해 새로운 단계가 트리거될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-109">For example, each time a child <xref:System.Windows.UIElement> object in the collection changes its position, it has the potential to trigger a new pass by the layout system.</span></span> <span data-ttu-id="b66aa-110">개체 특성과 레이아웃 동작 간의 긴밀한 관계로 인해 레이아웃 시스템을 호출할 수 있는 이벤트의 형식을 이해하는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-110">Because of the close relationship between object characteristics and layout behavior, it's important to understand the type of events that can invoke the layout system.</span></span> <span data-ttu-id="b66aa-111">레이아웃 단계의 불필요한 호출을 되도록 많이 줄이면 애플리케이션의 성능이 향상됩니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-111">Your application will perform better by reducing as much as possible any unnecessary invocations of the layout pass.</span></span>  
  
 <span data-ttu-id="b66aa-112">레이아웃 시스템은 컬렉션의 각 자식 멤버에 대해 두 개의 단계인 측정 단계 및 정렬 단계를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-112">The layout system completes two passes for each child member in a collection: a measure pass, and an arrange pass.</span></span> <span data-ttu-id="b66aa-113">각 자식 개체의 재정의 된 구현을 제공 합니다 <xref:System.Windows.UIElement.Measure%2A> 고 <xref:System.Windows.UIElement.Arrange%2A> 고유한 특정 레이아웃 동작을 제공 하기 위해 메서드.</span><span class="sxs-lookup"><span data-stu-id="b66aa-113">Each child object provides its own overridden implementation of the <xref:System.Windows.UIElement.Measure%2A> and <xref:System.Windows.UIElement.Arrange%2A> methods in order to provide its own specific layout behavior.</span></span> <span data-ttu-id="b66aa-114">가장 간단한 레이아웃은 화면에서 크기 조정, 배치 및 그리기를 수행할 요소가 되는 재귀 시스템입니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-114">At its simplest, layout is a recursive system that leads to an element being sized, positioned, and drawn onscreen.</span></span>  
  
-   <span data-ttu-id="b66aa-115">자식 <xref:System.Windows.UIElement> 개체는 먼저 핵심 속성이 측정 되도록 하 여 레이아웃 프로세스를 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-115">A child <xref:System.Windows.UIElement> object begins the layout process by first having its core properties measured.</span></span>  
  
-   <span data-ttu-id="b66aa-116">개체의 <xref:System.Windows.FrameworkElement> 와 같은 크기에 관련 된 속성이 <xref:System.Windows.FrameworkElement.Width%2A>를 <xref:System.Windows.FrameworkElement.Height%2A>, 및 <xref:System.Windows.FrameworkElement.Margin%2A>, 평가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-116">The object's <xref:System.Windows.FrameworkElement> properties that are related to size, such as <xref:System.Windows.FrameworkElement.Width%2A>, <xref:System.Windows.FrameworkElement.Height%2A>, and <xref:System.Windows.FrameworkElement.Margin%2A>, are evaluated.</span></span>  
  
-   <span data-ttu-id="b66aa-117"><xref:System.Windows.Controls.Panel>-같은 논리가 적용 됩니다는 <xref:System.Windows.Controls.DockPanel.Dock%2A> 의 속성을 <xref:System.Windows.Controls.DockPanel>, 또는 <xref:System.Windows.Controls.StackPanel.Orientation%2A> 의 속성은 <xref:System.Windows.Controls.StackPanel>.</span><span class="sxs-lookup"><span data-stu-id="b66aa-117"><xref:System.Windows.Controls.Panel>-specific logic is applied, such as the <xref:System.Windows.Controls.DockPanel.Dock%2A> property of the <xref:System.Windows.Controls.DockPanel>, or the <xref:System.Windows.Controls.StackPanel.Orientation%2A> property of the <xref:System.Windows.Controls.StackPanel>.</span></span>  
  
-   <span data-ttu-id="b66aa-118">모든 자식 개체가 측정된 후 콘텐츠가 정렬 또는 배치됩니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-118">Content is arranged, or positioned, after all child objects have been measured.</span></span>  
  
-   <span data-ttu-id="b66aa-119">자식 개체의 컬렉션이 화면에 그려집니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-119">The collection of child objects is drawn to the screen.</span></span>  
  
 <span data-ttu-id="b66aa-120">다음 작업 중 하나가 발생할 경우 레이아웃 단계 프로세스가 다시 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-120">The layout pass process is invoked again if any of the following actions occur:</span></span>  
  
-   <span data-ttu-id="b66aa-121">자식 개체가 컬렉션에 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-121">A child object is added to the collection.</span></span>  
  
-   <span data-ttu-id="b66aa-122"><xref:System.Windows.FrameworkElement.LayoutTransform%2A> 자식 개체에 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-122">A <xref:System.Windows.FrameworkElement.LayoutTransform%2A> is applied to the child object.</span></span>  
  
-   <span data-ttu-id="b66aa-123"><xref:System.Windows.UIElement.UpdateLayout%2A> 자식 개체에 대 한 호출 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-123">The <xref:System.Windows.UIElement.UpdateLayout%2A> method is called for the child object.</span></span>  
  
-   <span data-ttu-id="b66aa-124">측정 또는 정렬 단계에 영향을 주는 메타데이터로 표시된 종속성 속성의 값에 변경이 발생할 경우</span><span class="sxs-lookup"><span data-stu-id="b66aa-124">When a change occurs to the value of a dependency property that is marked with metadata affecting the measure or arrange passes.</span></span>  
  
### <a name="use-the-most-efficient-panel-where-possible"></a><span data-ttu-id="b66aa-125">가능한 경우 가장 효율적인 패널 사용</span><span class="sxs-lookup"><span data-stu-id="b66aa-125">Use the Most Efficient Panel where Possible</span></span>  
 <span data-ttu-id="b66aa-126">레이아웃 프로세스의 복잡성은 직접 동작을 기반으로 레이아웃의는 <xref:System.Windows.Controls.Panel>-사용할 요소를 파생 합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-126">The complexity of the layout process is directly based on the layout behavior of the <xref:System.Windows.Controls.Panel>-derived elements you use.</span></span> <span data-ttu-id="b66aa-127">예를 들어를 <xref:System.Windows.Controls.Grid> 또는 <xref:System.Windows.Controls.StackPanel> 보다 훨씬 더 많은 기능을 제공 하는 컨트롤을 <xref:System.Windows.Controls.Canvas> 제어 합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-127">For example, a <xref:System.Windows.Controls.Grid> or <xref:System.Windows.Controls.StackPanel> control provides much more functionality than a <xref:System.Windows.Controls.Canvas> control.</span></span> <span data-ttu-id="b66aa-128">기능이 많이 제공될수록 성능 비용이 증가합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-128">The price for this greater increase in functionality is a greater increase in performance costs.</span></span> <span data-ttu-id="b66aa-129">그러나 기능이 필요 하지 않은 경우는 <xref:System.Windows.Controls.Grid> 컨트롤에서는 같은 비용이 덜 드는 대안을 사용 해야는 <xref:System.Windows.Controls.Canvas> 또는 사용자 지정 패널입니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-129">However, if you do not require the functionality that a <xref:System.Windows.Controls.Grid> control provides, you should use the less costly alternatives, such as a <xref:System.Windows.Controls.Canvas> or a custom panel.</span></span>  
  
 <span data-ttu-id="b66aa-130">자세한 내용은 [패널 개요](../../../../docs/framework/wpf/controls/panels-overview.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b66aa-130">For more information, see [Panels Overview](../../../../docs/framework/wpf/controls/panels-overview.md).</span></span>  
  
### <a name="update-rather-than-replace-a-rendertransform"></a><span data-ttu-id="b66aa-131">RenderTransform을 대체하는 대신 업데이트</span><span class="sxs-lookup"><span data-stu-id="b66aa-131">Update Rather than Replace a RenderTransform</span></span>  
 <span data-ttu-id="b66aa-132">업데이트 수를 <xref:System.Windows.Media.Transform> 값으로 대체 하는 대신는 <xref:System.Windows.UIElement.RenderTransform%2A> 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-132">You may be able to update a <xref:System.Windows.Media.Transform> rather than replacing it as the value of a <xref:System.Windows.UIElement.RenderTransform%2A> property.</span></span> <span data-ttu-id="b66aa-133">애니메이션과 관련된 시나리오가 특히 이러한 경우에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-133">This is particularly true in scenarios that involve animation.</span></span> <span data-ttu-id="b66aa-134">기존 업데이트 하 여 <xref:System.Windows.Media.Transform>에 불필요 한 레이아웃 계산이 시작 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-134">By updating an existing <xref:System.Windows.Media.Transform>, you avoid initiating an unnecessary layout calculation.</span></span>  
  
### <a name="build-your-tree-top-down"></a><span data-ttu-id="b66aa-135">하향식 트리 빌드</span><span class="sxs-lookup"><span data-stu-id="b66aa-135">Build Your Tree Top-Down</span></span>  
 <span data-ttu-id="b66aa-136">논리적 트리에서 노드가 추가 또는 제거될 경우 노드의 부모 및 모든 자식에서 속성 무효화가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-136">When a node is added or removed from the logical tree, property invalidations are raised on the node's parent and all its children.</span></span> <span data-ttu-id="b66aa-137">결과적으로 이미 유효성이 검사된 노드에서 불필요한 무효화의 비용을 방지하려면 항상 하향식 생성 패턴을 따라야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-137">As a result, a top-down construction pattern should always be followed to avoid the cost of unnecessary invalidations on nodes that have already been validated.</span></span> <span data-ttu-id="b66aa-138">다음 표에서 하향식 및 상향식의 트리를 150 개 수준 깊이 단일 트리 실행 속도 차이 보여 줍니다 <xref:System.Windows.Controls.TextBlock> 고 <xref:System.Windows.Controls.DockPanel> 각 수준에서.</span><span class="sxs-lookup"><span data-stu-id="b66aa-138">The following table shows the difference in execution speed between building a tree top-down versus bottom-up, where the tree is 150 levels deep with a single <xref:System.Windows.Controls.TextBlock> and <xref:System.Windows.Controls.DockPanel> at each level.</span></span>  
  
|<span data-ttu-id="b66aa-139">**작업**</span><span class="sxs-lookup"><span data-stu-id="b66aa-139">**Action**</span></span>|<span data-ttu-id="b66aa-140">**트리 빌드(ms)**</span><span class="sxs-lookup"><span data-stu-id="b66aa-140">**Tree building (in ms)**</span></span>|<span data-ttu-id="b66aa-141">**렌더링—트리 빌드 포함(ms)**</span><span class="sxs-lookup"><span data-stu-id="b66aa-141">**Render—includes tree building (in ms)**</span></span>|  
|----------------|---------------------------------|-------------------------------------------------|  
|<span data-ttu-id="b66aa-142">상향식</span><span class="sxs-lookup"><span data-stu-id="b66aa-142">Bottom-up</span></span>|<span data-ttu-id="b66aa-143">366</span><span class="sxs-lookup"><span data-stu-id="b66aa-143">366</span></span>|<span data-ttu-id="b66aa-144">454</span><span class="sxs-lookup"><span data-stu-id="b66aa-144">454</span></span>|  
|<span data-ttu-id="b66aa-145">하향식</span><span class="sxs-lookup"><span data-stu-id="b66aa-145">Top-down</span></span>|<span data-ttu-id="b66aa-146">11</span><span class="sxs-lookup"><span data-stu-id="b66aa-146">11</span></span>|<span data-ttu-id="b66aa-147">96</span><span class="sxs-lookup"><span data-stu-id="b66aa-147">96</span></span>|  
  
 <span data-ttu-id="b66aa-148">다음 코드 예제에서는 하향식 트리를 만드는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="b66aa-148">The following code example demonstrates how to create a tree top down.</span></span>  
  
 [!code-csharp[Performance#PerformanceSnippet1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/Performance/CSharp/Window1.xaml.cs#performancesnippet1)]
 [!code-vb[Performance#PerformanceSnippet1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/Performance/visualbasic/window1.xaml.vb#performancesnippet1)]  
  
 <span data-ttu-id="b66aa-149">논리적 트리에 대한 자세한 내용은 [WPF의 트리](../../../../docs/framework/wpf/advanced/trees-in-wpf.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b66aa-149">For more information on the logical tree, see [Trees in WPF](../../../../docs/framework/wpf/advanced/trees-in-wpf.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b66aa-150">참고자료</span><span class="sxs-lookup"><span data-stu-id="b66aa-150">See also</span></span>
- [<span data-ttu-id="b66aa-151">WPF 응용 프로그램 성능 최적화</span><span class="sxs-lookup"><span data-stu-id="b66aa-151">Optimizing WPF Application Performance</span></span>](../../../../docs/framework/wpf/advanced/optimizing-wpf-application-performance.md)
- [<span data-ttu-id="b66aa-152">응용 프로그램 성능 계획</span><span class="sxs-lookup"><span data-stu-id="b66aa-152">Planning for Application Performance</span></span>](../../../../docs/framework/wpf/advanced/planning-for-application-performance.md)
- [<span data-ttu-id="b66aa-153">하드웨어 이용</span><span class="sxs-lookup"><span data-stu-id="b66aa-153">Taking Advantage of Hardware</span></span>](../../../../docs/framework/wpf/advanced/optimizing-performance-taking-advantage-of-hardware.md)
- [<span data-ttu-id="b66aa-154">2차원 그래픽 및 이미징</span><span class="sxs-lookup"><span data-stu-id="b66aa-154">2D Graphics and Imaging</span></span>](../../../../docs/framework/wpf/advanced/optimizing-performance-2d-graphics-and-imaging.md)
- [<span data-ttu-id="b66aa-155">개체 동작</span><span class="sxs-lookup"><span data-stu-id="b66aa-155">Object Behavior</span></span>](../../../../docs/framework/wpf/advanced/optimizing-performance-object-behavior.md)
- [<span data-ttu-id="b66aa-156">응용 프로그램 리소스</span><span class="sxs-lookup"><span data-stu-id="b66aa-156">Application Resources</span></span>](../../../../docs/framework/wpf/advanced/optimizing-performance-application-resources.md)
- [<span data-ttu-id="b66aa-157">텍스트</span><span class="sxs-lookup"><span data-stu-id="b66aa-157">Text</span></span>](../../../../docs/framework/wpf/advanced/optimizing-performance-text.md)
- [<span data-ttu-id="b66aa-158">데이터 바인딩</span><span class="sxs-lookup"><span data-stu-id="b66aa-158">Data Binding</span></span>](../../../../docs/framework/wpf/advanced/optimizing-performance-data-binding.md)
- [<span data-ttu-id="b66aa-159">기타 성능 권장 사항</span><span class="sxs-lookup"><span data-stu-id="b66aa-159">Other Performance Recommendations</span></span>](../../../../docs/framework/wpf/advanced/optimizing-performance-other-recommendations.md)
- [<span data-ttu-id="b66aa-160">레이아웃</span><span class="sxs-lookup"><span data-stu-id="b66aa-160">Layout</span></span>](../../../../docs/framework/wpf/advanced/layout.md)
